<ngb-alert
  [type]="alert.type"
  [ngClass]="{ 'slide-in': showAlert, 'slide-out': !showAlert }"
  [dismissible]="false"
  *ngIf="showAlert"
>
  {{ alert.message }}
</ngb-alert>
<div class="back">
  <i class="fa-solid fa-arrow-left" (click)="goBack()"></i>
</div>
<div class="form-container">
  <h2 class="heading mb-4">{{ heading }}</h2>
  <form [formGroup]="pinChangeForm" (ngSubmit)="onSubmit()">
    <!-- Account Number -->
    <div class="form-group">
      <label for="number">{{ select }}</label>
      <div class="input-container">
        <i [class]="icon"></i>
        <select formControlName="number" id="number" class="form-control">
          <option value="" disabled>{{ select }}</option>
          <option *ngFor="let number of numbers" [value]="number">
            {{ number }}
          </option>
        </select>
      </div>
      <div
        *ngIf="
          pinChangeForm.get('number')?.invalid &&
          (pinChangeForm.get('number')?.touched ||
            pinChangeForm.get('number')?.dirty)
        "
        class="error"
      >
        *this field is required.
      </div>
    </div>

    <!-- New PIN -->
    <div class="form-group">
      <label for="newPin">New {{ pinType }}</label>
      <div class="input-container">
        <i class="fas fa-key"></i>
        <input
          type="password"
          formControlName="newPin"
          id="newPin"
          class="form-control"
          placeholder="Enter New {{ pinType }}"
        />
      </div>
      <div class="error" style="color: rgb(9, 65, 114);">{{ pinDigit }}</div>
      <div
        *ngIf="
          pinChangeForm.get('newPin')?.invalid &&
          pinChangeForm.get('newPin')?.touched
        "
        class="error"
      >
        <div *ngIf="pinChangeForm.get('newPin')?.errors?.['required']">
          *New {{ pinType }} is required.
        </div>
        <!-- <div *ngIf="pinChangeForm.get('newPin')?.errors?.['minlength']">
          *New {{pinType}} must be 4 digits long.
        </div> -->
        <div *ngIf="pinChangeForm.get('newPin')?.errors?.['maxlength']">
          *New {{ pinType }} must be 6 digits long.
        </div>
        <div *ngIf="pinChangeForm.get('newPin')?.errors?.['pattern']">
          *New {{ pinType }} must be numeric.
        </div>
      </div>
    </div>

    <!-- Confirm PIN -->
    <div class="form-group">
      <label for="confirmPin">Confirm {{ pinType }}</label>
      <div class="input-container">
        <i class="fas fa-key"></i>
        <input
          type="password"
          formControlName="confirmPin"
          id="confirmPin"
          class="form-control"
          placeholder="Confirm New {{ pinType }}"
        />
      </div>
      <div
        *ngIf="
          pinChangeForm.get('confirmPin')?.invalid &&
          pinChangeForm.get('confirmPin')?.touched
        "
        class="error"
      >
        <div *ngIf="pinChangeForm.get('confirmPin')?.invalid">
          *Confirm {{ pinType }} is required.
        </div>
        <div *ngIf="pinChangeForm.errors?.['matchingPins']">
          *{{ pinType }}s do not match.
        </div>
      </div>
    </div>

    <!-- Old PIN -->
    <div class="form-group">
      <label for="password">Password</label>
      <div class="input-container">
        <i class="fas fa-lock"></i>
        <input
          type="password"
          formControlName="password"
          id="password"
          class="form-control"
          placeholder="Enter password"
        />
      </div>
      <div
        *ngIf="
          pinChangeForm.get('password')?.invalid &&
          (pinChangeForm.get('password')?.touched ||
            pinChangeForm.get('password')?.dirty)
        "
        class="error"
      >
        *Password is required
      </div>
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      class="btn btn-submit"
      [disabled]="pinChangeForm.invalid"
    >
      Submit
    </button>
  </form>
</div>
